{"ast":null,"code":"'use strict';\n/** @module cheerio/css */\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar domEach = require('../utils').domEach;\n\nvar toString = Object.prototype.toString;\n/**\n * Get the value of a style property for the first element in the set of matched\n * elements or set one or more CSS properties for every matched element.\n *\n * @param {string | object} prop - The name of the property.\n * @param {string} [val] - If specified the new value.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/css/}\n */\n\nexports.css = function (prop, val) {\n  if (arguments.length === 2 || // When `prop` is a \"plain\" object\n  toString.call(prop) === '[object Object]') {\n    return domEach(this, function (idx, el) {\n      setCss(el, prop, val, idx);\n    });\n  }\n\n  return getCss(this[0], prop);\n};\n/**\n * Set styles of all elements.\n *\n * @private\n * @param {Element} el - Element to set style of.\n * @param {string | object} prop - Name of property.\n * @param {string | Function} val - Value to set property to.\n * @param {number} [idx] - Optional index within the selection.\n */\n\n\nfunction setCss(el, prop, val, idx) {\n  if (typeof prop === 'string') {\n    var styles = getCss(el);\n\n    if (typeof val === 'function') {\n      val = val.call(el, idx, styles[prop]);\n    }\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if (_typeof(prop) === 'object') {\n    Object.keys(prop).forEach(function (k) {\n      setCss(el, k, prop[k]);\n    });\n  }\n}\n/**\n * Get parsed styles of the first element.\n *\n * @private\n * @param {Element} el - Element to get styles from.\n * @param {string | string[]} [prop] - Name of the prop.\n * @returns {object | undefined} The parsed styles.\n */\n\n\nfunction getCss(el, prop) {\n  if (!el || !el.attribs) return;\n  var styles = parse(el.attribs.style);\n\n  if (typeof prop === 'string') {\n    return styles[prop];\n  }\n\n  if (Array.isArray(prop)) {\n    var newStyles = {};\n    prop.forEach(function (item) {\n      if (styles[item] != null) {\n        newStyles[item] = styles[item];\n      }\n    });\n    return newStyles;\n  }\n\n  return styles;\n}\n/**\n * Stringify `obj` to styles.\n *\n * @private\n * @param {object} obj - Object to stringify.\n * @returns {string} The serialized styles.\n */\n\n\nfunction stringify(obj) {\n  return Object.keys(obj || {}).reduce(function (str, prop) {\n    return str += '' + (str ? ' ' : '') + prop + ': ' + obj[prop] + ';';\n  }, '');\n}\n/**\n * Parse `styles`.\n *\n * @private\n * @param {string} styles - Styles to be parsed.\n * @returns {object} The parsed styles.\n */\n\n\nfunction parse(styles) {\n  styles = (styles || '').trim();\n  if (!styles) return {};\n  return styles.split(';').reduce(function (obj, str) {\n    var n = str.indexOf(':'); // skip if there is no :, or if it is the first/last character\n\n    if (n < 1 || n === str.length - 1) return obj;\n    obj[str.slice(0, n).trim()] = str.slice(n + 1).trim();\n    return obj;\n  }, {});\n}","map":null,"metadata":{},"sourceType":"module"}