{"ast":null,"code":"'use strict';\n/**\n * Methods for modifying the DOM structure.\n *\n * @module cheerio/manipulation\n */\n\nvar parse = require('../parse');\n\nvar html = require('../static').html;\n\nvar text = require('../static').text;\n\nvar updateDOM = parse.update;\n\nvar utils = require('../utils');\n\nvar domEach = utils.domEach;\nvar cloneDom = utils.cloneDom;\nvar isHtml = utils.isHtml;\nvar slice = Array.prototype.slice;\n\nvar domhandler = require('domhandler');\n\nvar DomUtils = require('htmlparser2').DomUtils;\n/**\n * Create an array of nodes, recursing into arrays and parsing strings if necessary.\n *\n * @private\n * @param {Cheerio | string | Cheerio[] | string[]} [elem] - Elements to make an array of.\n * @param {boolean} [clone] - Optionally clone nodes.\n * @returns {Node[]} The array of nodes.\n */\n\n\nexports._makeDomArray = function makeDomArray(elem, clone) {\n  if (elem == null) {\n    return [];\n  }\n\n  if (elem.cheerio) {\n    return clone ? cloneDom(elem.get()) : elem.get();\n  }\n\n  if (Array.isArray(elem)) {\n    return elem.reduce(function (newElems, el) {\n      return newElems.concat(this._makeDomArray(el, clone));\n    }.bind(this), []);\n  }\n\n  if (typeof elem === 'string') {\n    return parse(elem, this.options, false).children;\n  }\n\n  return clone ? cloneDom([elem]) : [elem];\n};\n\nfunction _insert(concatenator) {\n  return function () {\n    var elems = slice.call(arguments);\n    var lastIdx = this.length - 1;\n    return domEach(this, function (i, el) {\n      var domSrc = typeof elems[0] === 'function' ? elems[0].call(el, i, html(el.children)) : elems;\n\n      var dom = this._makeDomArray(domSrc, i < lastIdx);\n\n      concatenator(dom, el.children, el);\n    });\n  };\n}\n/**\n * Modify an array in-place, removing some number of elements and adding new\n * elements directly following them.\n *\n * @private\n * @param {Node[]} array - Target array to splice.\n * @param {number} spliceIdx - Index at which to begin changing the array.\n * @param {number} spliceCount - Number of elements to remove from the array.\n * @param {Node[]} newElems - Elements to insert into the array.\n * @param {NodeWithChildren} parent - The parent of the node.\n * @returns {Node[]} The spliced array.\n */\n\n\nfunction uniqueSplice(array, spliceIdx, spliceCount, newElems, parent) {\n  var spliceArgs = [spliceIdx, spliceCount].concat(newElems);\n  var prev = array[spliceIdx - 1] || null;\n  var next = array[spliceIdx + spliceCount] || null; // Before splicing in new elements, ensure they do not already appear in the\n  // current array.\n\n  for (var idx = 0; idx < newElems.length; ++idx) {\n    var node = newElems[idx];\n    var oldParent = node.parent;\n    var prevIdx = oldParent && oldParent.children.indexOf(newElems[idx]);\n\n    if (oldParent && prevIdx > -1) {\n      oldParent.children.splice(prevIdx, 1);\n\n      if (parent === oldParent && spliceIdx > prevIdx) {\n        spliceArgs[0]--;\n      }\n    }\n\n    node.parent = parent;\n\n    if (node.prev) {\n      node.prev.next = node.next || null;\n    }\n\n    if (node.next) {\n      node.next.prev = node.prev || null;\n    }\n\n    node.prev = newElems[idx - 1] || prev;\n    node.next = newElems[idx + 1] || next;\n  }\n\n  if (prev) {\n    prev.next = newElems[0];\n  }\n\n  if (next) {\n    next.prev = newElems[newElems.length - 1];\n  }\n\n  return array.splice.apply(array, spliceArgs);\n}\n/**\n * Insert every element in the set of matched elements to the end of the target.\n *\n * @example\n *   $('<li class=\"plum\">Plum</li>').appendTo('#fruits');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //      <li class=\"plum\">Plum</li>\n *   //    </ul>\n *\n * @param {string | Cheerio} target - Element to append elements to.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/appendTo/}\n */\n\n\nexports.appendTo = function (target) {\n  if (!target.cheerio) {\n    target = this.constructor.call(this.constructor, target, null, this._originalRoot);\n  }\n\n  target.append(this);\n  return this;\n};\n/**\n * Insert every element in the set of matched elements to the beginning of the target.\n *\n * @example\n *   $('<li class=\"plum\">Plum</li>').prependTo('#fruits');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"plum\">Plum</li>\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //    </ul>\n *\n * @param {string | Cheerio} target - Element to prepend elements to.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/prependTo/}\n */\n\n\nexports.prependTo = function (target) {\n  if (!target.cheerio) {\n    target = this.constructor.call(this.constructor, target, null, this._originalRoot);\n  }\n\n  target.prepend(this);\n  return this;\n};\n/**\n * Inserts content as the *last* child of each of the selected elements.\n *\n * @example\n *   $('ul').append('<li class=\"plum\">Plum</li>');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //      <li class=\"plum\">Plum</li>\n *   //    </ul>\n *\n * @function\n * @see {@link https://api.jquery.com/append/}\n */\n\n\nexports.append = _insert(function (dom, children, parent) {\n  uniqueSplice(children, children.length, 0, dom, parent);\n});\n/**\n * Inserts content as the *first* child of each of the selected elements.\n *\n * @example\n *   $('ul').prepend('<li class=\"plum\">Plum</li>');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"plum\">Plum</li>\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //    </ul>\n *\n * @function\n * @see {@link https://api.jquery.com/prepend/}\n */\n\nexports.prepend = _insert(function (dom, children, parent) {\n  uniqueSplice(children, 0, 0, dom, parent);\n});\n\nfunction _wrap(insert) {\n  return function (wrapper) {\n    var wrapperFn = typeof wrapper === 'function' && wrapper;\n    var lastIdx = this.length - 1;\n    var lastParent = this.parents().last();\n\n    for (var i = 0; i < this.length; i++) {\n      var el = this[i];\n\n      if (wrapperFn) {\n        wrapper = wrapperFn.call(el, i);\n      }\n\n      if (typeof wrapper === 'string' && !isHtml(wrapper)) {\n        wrapper = lastParent.find(wrapper).clone();\n      }\n\n      var wrapperDom = this._makeDomArray(wrapper, i < lastIdx).slice(0, 1);\n\n      var elInsertLocation = wrapperDom[0]; // Find the deepest child. Only consider the first tag child of each node\n      // (ignore text); stop if no children are found.\n\n      var j = 0;\n\n      while (elInsertLocation && elInsertLocation.children && j < elInsertLocation.children.length) {\n        if (elInsertLocation.children[j].type === 'tag') {\n          elInsertLocation = elInsertLocation.children[j];\n          j = 0;\n        } else {\n          j++;\n        }\n      }\n\n      insert(el, elInsertLocation, wrapperDom);\n    }\n\n    return this;\n  };\n}\n/**\n * The .wrap() function can take any string or object that could be passed to\n * the $() factory function to specify a DOM structure. This structure may be\n * nested several levels deep, but should contain only one inmost element. A\n * copy of this structure will be wrapped around each of the elements in the set\n * of matched elements. This method returns the original set of elements for\n * chaining purposes.\n *\n * @example\n *   const redFruit = $('<div class=\"red-fruit\"></div>');\n *   $('.apple').wrap(redFruit);\n *\n *   //=> <ul id=\"fruits\">\n *   //     <div class=\"red-fruit\">\n *   //      <li class=\"apple\">Apple</li>\n *   //     </div>\n *   //     <li class=\"orange\">Orange</li>\n *   //     <li class=\"plum\">Plum</li>\n *   //   </ul>\n *\n *   const healthy = $('<div class=\"healthy\"></div>');\n *   $('li').wrap(healthy);\n *\n *   //=> <ul id=\"fruits\">\n *   //     <div class=\"healthy\">\n *   //       <li class=\"apple\">Apple</li>\n *   //     </div>\n *   //     <div class=\"healthy\">\n *   //       <li class=\"orange\">Orange</li>\n *   //     </div>\n *   //     <div class=\"healthy\">\n *   //        <li class=\"plum\">Plum</li>\n *   //     </div>\n *   //   </ul>\n *\n * @function\n * @param {Cheerio} wrapper - The DOM structure to wrap around each element in\n *   the selection.\n * @see {@link https://api.jquery.com/wrap/}\n */\n\n\nexports.wrap = _wrap(function (el, elInsertLocation, wrapperDom) {\n  var parent = el.parent;\n  var siblings = parent.children;\n  var index = siblings.indexOf(el);\n  updateDOM([el], elInsertLocation); // The previous operation removed the current element from the `siblings`\n  // array, so the `dom` array can be inserted without removing any\n  // additional elements.\n\n  uniqueSplice(siblings, index, 0, wrapperDom, parent);\n});\n/**\n * The .wrapInner() function can take any string or object that could be passed\n * to the $() factory function to specify a DOM structure. This structure may be\n * nested several levels deep, but should contain only one inmost element. The\n * structure will be wrapped around the content of each of the elements in the\n * set of matched elements.\n *\n * @example\n *   const redFruit = $('<div class=\"red-fruit\"></div>');\n *   $('.apple').wrapInner(redFruit);\n *\n *   //=> <ul id=\"fruits\">\n *   //     <li class=\"apple\">\n *   //       <div class=\"red-fruit\">Apple</div>\n *   //     </li>\n *   //     <li class=\"orange\">Orange</li>\n *   //     <li class=\"pear\">Pear</li>\n *   //   </ul>\n *\n *   const healthy = $('<div class=\"healthy\"></div>');\n *   $('li').wrapInner(healthy);\n *\n *   //=> <ul id=\"fruits\">\n *   //     <li class=\"apple\">\n *   //       <div class=\"healthy\">Apple</div>\n *   //     </li>\n *   //     <li class=\"orange\">\n *   //       <div class=\"healthy\">Orange</div>\n *   //     </li>\n *   //     <li class=\"pear\">\n *   //       <div class=\"healthy\">Pear</div>\n *   //     </li>\n *   //   </ul>\n *\n * @function\n * @param {Cheerio} wrapper - The DOM structure to wrap around the content of\n *   each element in the selection.\n * @see {@link https://api.jquery.com/wrapInner/}\n */\n\nexports.wrapInner = _wrap(function (el, elInsertLocation, wrapperDom) {\n  updateDOM(el.children, elInsertLocation);\n  updateDOM(wrapperDom, el);\n});\n/**\n * The .unwrap() function, removes the parents of the set of matched elements\n * from the DOM, leaving the matched elements in their place.\n *\n * @example <caption>without selector</caption>\n *   const $ = cheerio.load(\n *     '<div id=test>\\n  <div><p>Hello</p></div>\\n  <div><p>World</p></div>\\n</div>'\n *   );\n *   $('#test p').unwrap();\n *\n *   //=> <div id=test>\n *   //     <p>Hello</p>\n *   //     <p>World</p>\n *   //   </div>\n *\n * @example <caption>with selector</caption>\n *   const $ = cheerio.load(\n *     '<div id=test>\\n  <p>Hello</p>\\n  <b><p>World</p></b>\\n</div>'\n *   );\n *   $('#test p').unwrap('b');\n *\n *   //=> <div id=test>\n *   //     <p>Hello</p>\n *   //     <p>World</p>\n *   //   </div>\n *\n * @param {string} [selector] - A selector to check the parent element against.\n *   If an element's parent does not match the selector, the element won't be unwrapped.\n * @returns {Cheerio} The instance itself, for chaining.\n * @see {@link https://api.jquery.com/unwrap/}\n */\n\nexports.unwrap = function (selector) {\n  var self = this;\n  this.parent(selector).not('body').each(function (i, el) {\n    self._make(el).replaceWith(el.children);\n  });\n  return this;\n};\n/**\n * The .wrapAll() function can take any string or object that could be passed to\n * the $() function to specify a DOM structure. This structure may be nested\n * several levels deep, but should contain only one inmost element. The\n * structure will be wrapped around all of the elements in the set of matched\n * elements, as a single group.\n *\n * @example <caption>With markup passed to `wrapAll`</caption>\n *   const $ = cheerio.load(\n *     '<div class=\"container\"><div class=\"inner\">First</div><div class=\"inner\">Second</div></div>'\n *   );\n *   $('.inner').wrapAll(\"<div class='new'></div>\");\n *\n *   //=> <div class=\"container\">\n *   //     <div class='new'>\n *   //       <div class=\"inner\">First</div>\n *   //       <div class=\"inner\">Second</div>\n *   //     </div>\n *   //   </div>\n *\n * @example <caption>With an existing cheerio instance</caption>\n *   const $ = cheerio.load(\n *     '<span>Span 1</span><strong>Strong</strong><span>Span 2</span>'\n *   );\n *   const wrap = $('<div><p><em><b></b></em></p></div>');\n *   $('span').wrapAll(wrap);\n *\n *   //=> <div>\n *   //     <p>\n *   //       <em>\n *   //         <b>\n *   //           <span>Span 1</span>\n *   //           <span>Span 2</span>\n *   //         </b>\n *   //       </em>\n *   //     </p>\n *   //   </div>\n *   //   <strong>Strong</strong>\n *\n * @param {Cheerio | string | Element | Element[] | Function} wrapper - The DOM\n *   structure to wrap around all matched elements in the selection.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/wrapAll/}\n */\n\n\nexports.wrapAll = function (wrapper) {\n  if (this[0]) {\n    if (typeof wrapper === 'function') {\n      wrapper = wrapper.call(this[0]);\n    }\n\n    var wrap = this._make(wrapper).insertBefore(this[0]); // if html is given as wrapper, wrap may contain text elements\n\n\n    var elInsertLocation = {\n      children: wrap\n    };\n    var j = 0; // Find the deepest child. Only consider the first tag child of each node\n    // (ignore text); stop if no children are found.\n\n    while (elInsertLocation && elInsertLocation.children && j < elInsertLocation.children.length) {\n      if (elInsertLocation.children[j].type === 'tag') {\n        elInsertLocation = elInsertLocation.children[j];\n        j = 0;\n      } else {\n        j++;\n      }\n    }\n\n    this._make(elInsertLocation).append(this);\n  }\n\n  return this;\n};\n/*eslint-disable jsdoc/check-param-names*/\n\n/**\n * Insert content next to each element in the set of matched elements.\n *\n * @example\n *   $('.apple').after('<li class=\"plum\">Plum</li>');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"plum\">Plum</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //    </ul>\n *\n * @param {...(string | Element | Element[] | Cheerio | Function)} content -\n *   HTML string, DOM element, array of DOM elements or Cheerio to insert after\n *   each element in the set of matched elements.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/after/}\n */\n\n\nexports.after = function () {\n  var elems = slice.call(arguments);\n  var lastIdx = this.length - 1;\n  return domEach(this, function (i, el) {\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return;\n    var domSrc = typeof elems[0] === 'function' ? elems[0].call(el, i, html(el.children)) : elems;\n\n    var dom = this._makeDomArray(domSrc, i < lastIdx); // Add element after `this` element\n\n\n    uniqueSplice(siblings, index + 1, 0, dom, parent);\n  });\n};\n/*eslint-enable jsdoc/check-param-names*/\n\n/**\n * Insert every element in the set of matched elements after the target.\n *\n * @example\n *   $('<li class=\"plum\">Plum</li>').insertAfter('.apple');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"plum\">Plum</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //    </ul>\n *\n * @param {string | Cheerio} target - Element to insert elements after.\n * @returns {Cheerio} The set of newly inserted elements.\n * @see {@link https://api.jquery.com/insertAfter/}\n */\n\n\nexports.insertAfter = function (target) {\n  var clones = [];\n  var self = this;\n\n  if (typeof target === 'string') {\n    target = this.constructor.call(this.constructor, target, null, this._originalRoot);\n  }\n\n  target = this._makeDomArray(target);\n  self.remove();\n  domEach(target, function (i, el) {\n    var clonedSelf = self._makeDomArray(self.clone());\n\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return; // Add cloned `this` element(s) after target element\n\n    uniqueSplice(siblings, index + 1, 0, clonedSelf, parent);\n    clones.push(clonedSelf);\n  });\n  return this.constructor.call(this.constructor, this._makeDomArray(clones));\n};\n/*eslint-disable jsdoc/check-param-names*/\n\n/**\n * Insert content previous to each element in the set of matched elements.\n *\n * @example\n *   $('.apple').before('<li class=\"plum\">Plum</li>');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"plum\">Plum</li>\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //    </ul>\n *\n * @param {...(string | Element | Element[] | Cheerio | Function)} content -\n *   HTML string, DOM element, array of DOM elements or Cheerio to insert before\n *   each element in the set of matched elements.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/before/}\n */\n\n\nexports.before = function () {\n  var elems = slice.call(arguments);\n  var lastIdx = this.length - 1;\n  return domEach(this, function (i, el) {\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return;\n    var domSrc = typeof elems[0] === 'function' ? elems[0].call(el, i, html(el.children)) : elems;\n\n    var dom = this._makeDomArray(domSrc, i < lastIdx); // Add element before `el` element\n\n\n    uniqueSplice(siblings, index, 0, dom, parent);\n  });\n};\n/*eslint-enable jsdoc/check-param-names*/\n\n/**\n * Insert every element in the set of matched elements before the target.\n *\n * @example\n *   $('<li class=\"plum\">Plum</li>').insertBefore('.apple');\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"plum\">Plum</li>\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //      <li class=\"pear\">Pear</li>\n *   //    </ul>\n *\n * @param {string | Cheerio} target - Element to insert elements before.\n * @returns {Cheerio} The set of newly inserted elements.\n * @see {@link https://api.jquery.com/insertBefore/}\n */\n\n\nexports.insertBefore = function (target) {\n  var clones = [];\n  var self = this;\n\n  if (typeof target === 'string') {\n    target = this.constructor.call(this.constructor, target, null, this._originalRoot);\n  }\n\n  target = this._makeDomArray(target);\n  self.remove();\n  domEach(target, function (_, el) {\n    var clonedSelf = self._makeDomArray(self.clone());\n\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return; // Add cloned `this` element(s) after target element\n\n    uniqueSplice(siblings, index, 0, clonedSelf, parent);\n    clones.push(clonedSelf);\n  });\n  return this.constructor.call(this.constructor, this._makeDomArray(clones));\n};\n/**\n * Removes the set of matched elements from the DOM and all their children.\n * `selector` filters the set of matched elements to be removed.\n *\n * @example\n *   $('.pear').remove();\n *   $.html();\n *   //=>  <ul id=\"fruits\">\n *   //      <li class=\"apple\">Apple</li>\n *   //      <li class=\"orange\">Orange</li>\n *   //    </ul>\n *\n * @param {string} [selector] - Optional selector for elements to remove.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/remove/}\n */\n\n\nexports.remove = function (selector) {\n  // Filter if we have selector\n  var elems = selector ? this.filter(selector) : this;\n  domEach(elems, function (_, el) {\n    DomUtils.removeElement(el);\n    el.prev = el.next = el.parent = null;\n  });\n  return this;\n};\n/**\n * Replaces matched elements with `content`.\n *\n * @example\n *   const plum = $('<li class=\"plum\">Plum</li>');\n *   $('.pear').replaceWith(plum);\n *   $.html();\n *   //=> <ul id=\"fruits\">\n *   //     <li class=\"apple\">Apple</li>\n *   //     <li class=\"orange\">Orange</li>\n *   //     <li class=\"plum\">Plum</li>\n *   //   </ul>\n *\n * @param {Cheerio | Function} content - Replacement for matched elements.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/replaceWith/}\n */\n\n\nexports.replaceWith = function (content) {\n  return domEach(this, function (i, el) {\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n\n    var dom = this._makeDomArray(typeof content === 'function' ? content.call(el, i, el) : content); // In the case that `dom` contains nodes that already exist in other\n    // structures, ensure those nodes are properly removed.\n\n\n    updateDOM(dom, null);\n    var index = siblings.indexOf(el); // Completely remove old element\n\n    uniqueSplice(siblings, index, 1, dom, parent);\n\n    if (dom.indexOf(el) < 0) {\n      el.parent = el.prev = el.next = null;\n    }\n  });\n};\n/**\n * Empties an element, removing all its children.\n *\n * @example\n *   $('ul').empty();\n *   $.html();\n *   //=>  <ul id=\"fruits\"></ul>\n *\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/empty/}\n */\n\n\nexports.empty = function () {\n  return domEach(this, function (_, el) {\n    el.children.forEach(function (child) {\n      child.next = child.prev = child.parent = null;\n    });\n    el.children.length = 0;\n  });\n};\n/**\n * Gets an HTML content string from the first selected element. If `htmlString`\n * is specified, each selected element's content is replaced by the new content.\n *\n * @example\n *   $('.orange').html();\n *   //=> Orange\n *\n *   $('#fruits').html('<li class=\"mango\">Mango</li>').html();\n *   //=> <li class=\"mango\">Mango</li>\n *\n * @param {string | Cheerio} str - If specified used to replace selection's contents.\n * @returns {Cheerio} The instance itself.\n * @see {@link https://api.jquery.com/html/}\n */\n\n\nexports.html = function (str) {\n  if (str === undefined) {\n    if (!this[0] || !this[0].children) return null;\n    return html(this[0].children, this.options);\n  }\n\n  var opts = Object.apply({}, this.options); // keep main options\n\n  return domEach(this, function (_, el) {\n    el.children.forEach(function (child) {\n      child.next = child.prev = child.parent = null;\n    });\n    opts.context = el;\n    var content = str.cheerio ? str.clone().get() : parse('' + str, opts, false).children;\n    updateDOM(content, el);\n  });\n};\n/**\n * Turns the collection to a string. Alias for `.html()`.\n *\n * @returns {string} The rendered document.\n */\n\n\nexports.toString = function () {\n  return html(this, this.options);\n};\n/**\n * Get the combined text contents of each element in the set of matched\n * elements, including their descendants. If `textString` is specified, each\n * selected element's content is replaced by the new text content.\n *\n * @example\n *   $('.orange').text();\n *   //=> Orange\n *\n *   $('ul').text();\n *   //=>  Apple\n *   //    Orange\n *   //    Pear\n *\n * @param {string | Function} [str] - If specified replacement for the selected\n *   element's contents.\n * @returns {Cheerio | string} The instance itself when setting text, otherwise\n *   the rendered document.\n * @see {@link https://api.jquery.com/text/}\n */\n\n\nexports.text = function (str) {\n  // If `str` is undefined, act as a \"getter\"\n  if (str === undefined) {\n    return text(this);\n  }\n\n  if (typeof str === 'function') {\n    // Function support\n    return domEach(this, function (i, el) {\n      return exports.text.call(this._make(el), str.call(el, i, text([el])));\n    });\n  } // Append text node to each selected elements\n\n\n  return domEach(this, function (_, el) {\n    el.children.forEach(function (child) {\n      child.next = child.prev = child.parent = null;\n    });\n    var textNode = new domhandler.Text(str);\n    updateDOM(textNode, el);\n  });\n};\n/**\n * Clone the cheerio object.\n *\n * @example\n *   const moreFruit = $('#fruits').clone();\n *\n * @returns {Cheerio} The cloned object.\n * @see {@link https://api.jquery.com/clone/}\n */\n\n\nexports.clone = function () {\n  return this._make(cloneDom(this.get()));\n};","map":null,"metadata":{},"sourceType":"module"}